# ğŸš€ Notion-Files-Management (v2.0 é‡æ„ç‰ˆ)

å°† Notion å˜èº«ä¸ºæ— é™å®¹é‡ç§æœ‰äº‘ç›˜

## ğŸ“¦ v2.0 é‡æ„è¯´æ˜

æœ¬ç‰ˆæœ¬åŸºäº **Notion API 2025-09-03** ç‰ˆæœ¬è¿›è¡Œäº†å®Œå…¨é‡æ„ï¼š

### æ ¸å¿ƒæ”¹è¿›

| ç‰¹æ€§ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|--------|--------|
| APIç‰ˆæœ¬ | 2022-06-28 | **2025-09-03** |
| å°æ–‡ä»¶é˜ˆå€¼ | æ— åŒºåˆ† | **20MBç›´ä¼ ** |
| åˆ†ç‰‡å¤§å° | 5MB | **10MB** |
| Blockç±»å‹ | ä»…file | **image/video/audio/pdf/file** |
| è¿›åº¦æ˜¾ç¤º | ç®€å•æ–‡æœ¬ | **Rich UIé¢æ¿** |
| ä¼šè¯é‡å»º | æ•´ä½“é‡è¯• | **åˆ†ç‰‡çº§åˆ«æ£€æµ‹+é‡å»º** |

### ä¸Šä¼ é€»è¾‘é‡å†™

1. **æ™ºèƒ½åˆ†æµ**
   - å°æ–‡ä»¶ (â‰¤20MB): å•æ¬¡ç›´ä¼ ï¼Œé€Ÿåº¦æ›´å¿«
   - å¤§æ–‡ä»¶ (>20MB): 10MBåˆ†ç‰‡ä¸Šä¼ 

2. **Blockç±»å‹è‡ªåŠ¨è¯†åˆ«**
   - å›¾ç‰‡ â†’ image block (æ”¯æŒé¢„è§ˆ)
   - è§†é¢‘ â†’ video block (æ”¯æŒæ’­æ”¾)
   - éŸ³é¢‘ â†’ audio block (æ”¯æŒæ’­æ”¾)
   - PDF â†’ pdf block (æ”¯æŒå†…åµŒ)
   - å…¶ä»– â†’ file block

3. **ä¼šè¯å¤±æ•ˆæ™ºèƒ½é‡å»º**
   - æ¯ä¸ªåˆ†ç‰‡ä¸Šä¼ å‰æ£€æµ‹ä¼šè¯çŠ¶æ€
   - ä¼šè¯å¤±æ•ˆæ—¶è‡ªåŠ¨é‡æ–°åˆ›å»ºä¸Šä¼ ä¼šè¯
   - æ— éœ€ä»å¤´å¼€å§‹é‡è¯•æ•´ä¸ªæ–‡ä»¶

4. **Rich UI å®æ—¶è¿›åº¦**
   - æ€»è¿›åº¦æ¡ + é€Ÿåº¦ + å‰©ä½™æ—¶é—´
   - æ¯ä¸ªæ–‡ä»¶ç‹¬ç«‹è¿›åº¦æ˜¾ç¤º
   - åˆ†ç‰‡è¿›åº¦ (å½“å‰åˆ†ç‰‡/æ€»åˆ†ç‰‡)
   - é‡è¯•çŠ¶æ€å®æ—¶æ˜¾ç¤º

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼  (æ”¯æŒ5GB+)
- âœ… å°æ–‡ä»¶ç›´ä¼ ä¼˜åŒ– (â‰¤20MB)
- âœ… è‡ªåŠ¨ä¼ªè£…ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼
- âœ… å¤šçº¿ç¨‹å¹¶å‘ä¸Šä¼ /ä¸‹è½½
- âœ… ç›®å½•ç»“æ„ä¿æŒä¸Šä¼ 
- âœ… Aria2 é«˜é€Ÿä¸‹è½½é›†æˆ
- âœ… IDM ä»»åŠ¡å¯¼å‡º
- âœ… æ–‡ä»¶é“¾æ¥ç¼“å­˜ (40åˆ†é’Ÿ)
- âœ… æ‰¹é‡å»é™¤ .txt åç¼€

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

1. é…ç½®ç¯å¢ƒå˜é‡:
```bash
# .env æ–‡ä»¶
NOTION_TOKEN=your_notion_integration_token
NOTION_VERSION=2025-09-03  # å¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
```

2. å®‰è£…ä¾èµ–:
```bash
pip install requests questionary rich python-dotenv packaging
```

3. è¿è¡Œ:
```bash
python main.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ main.py      # ä¸»ç¨‹åºã€ä¸Šä¼ å™¨å’Œç”¨æˆ·ç•Œé¢
â”œâ”€â”€ notion.py    # Notion API å°è£… (ä¸Šä¼ /ä¸‹è½½æ ¸å¿ƒ)
â”œâ”€â”€ aria2.py     # Aria2 ä¸‹è½½æœåŠ¡
â””â”€â”€ .env         # ç¯å¢ƒé…ç½®
```

## ğŸ”§ API è¯´æ˜

```python
from notion import NotionFileManager, UploadProgress, UploadStatus

# åˆå§‹åŒ–
manager = NotionFileManager(token="your_token")
manager.set_page("your_page_id")

# ä¸Šä¼ æ–‡ä»¶ï¼ˆå¸¦è¿›åº¦å›è°ƒï¼‰
def on_progress(p: UploadProgress):
    print(f"{p.filename}: {p.status.value} {p.uploaded}/{p.total}")

manager.upload_file("path/to/file.zip", progress_callback=on_progress)

# è·å–æ–‡ä»¶åˆ—è¡¨
files = manager.file_list()

# ä¸‹è½½æ–‡ä»¶
manager.download_file(files[0], "downloads/")
```

## ğŸ“„ License

<<<<<<< HEAD
GPL v3 - Copyright (C) 2025 Ruibin_Ningh & Zyx_2012
=======
## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ğŸ“¦ æ ¸å¿ƒæ¨¡å—

```
â”œâ”€â”€ main.py          # ä¸»ç¨‹åºå’Œç”¨æˆ·ç•Œé¢
â”œâ”€â”€ notion.py        # Notion API å°è£…å’Œæ–‡ä»¶ç®¡ç†
â”œâ”€â”€ aria2.py         # Aria2 ä¸‹è½½æœåŠ¡é›†æˆ
â””â”€â”€ requirements.txt # Python ä¾èµ–åŒ…
```

### ğŸ›ï¸ è®¾è®¡æ¨¡å¼

- **MVC æ¶æ„**: æ¸…æ™°çš„æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»
- **çŠ¶æ€æœº**: æ–‡ä»¶ä¸Šä¼ ä¸‹è½½çš„çŠ¶æ€ç®¡ç†
- **ç­–ç•¥æ¨¡å¼**: å¤šä¸‹è½½å¼•æ“æ”¯æŒ
- **è§‚å¯Ÿè€…æ¨¡å¼**: è¿›åº¦ç›‘æ§å’ŒçŠ¶æ€æ›´æ–°

### ğŸ”§ æ ¸å¿ƒæŠ€æœ¯

#### ç½‘ç»œå±‚
- **æ™ºèƒ½é‡è¯•**: å¤šå±‚é‡è¯•æœºåˆ¶ (urllib3 + æ‰‹åŠ¨é‡è¯•)
- **è¯·æ±‚é—´éš”**: é˜²æ­¢APIé™æµå’Œè¿æ¥é‡ç½®
- **è¿æ¥æ± **: é«˜æ•ˆçš„HTTPè¿æ¥ç®¡ç†

#### å¹¶å‘å¤„ç†
- **å¤šçº¿ç¨‹ä¸Šä¼ **: 1-5çº¿ç¨‹å¹¶å‘é…ç½®
- **å¼‚æ­¥ä¸‹è½½**: éé˜»å¡çš„ä¸‹è½½æ“ä½œ
- **èµ„æºæ§åˆ¶**: åˆç†çš„èµ„æºä½¿ç”¨å’Œå†…å­˜ç®¡ç†

#### é”™è¯¯å¤„ç†
- **å¼‚å¸¸åˆ†ç±»**: è¿æ¥é”™è¯¯ vs ä¸šåŠ¡é”™è¯¯
- **è‡ªåŠ¨æ¢å¤**: æ™ºèƒ½çš„é‡è¯•å’Œæ¢å¤ç­–ç•¥
- **ç”¨æˆ·å‹å¥½**: æ¸…æ™°çš„é”™è¯¯æç¤ºå’Œè§£å†³å»ºè®®

---

## â“ å¸¸è§é—®é¢˜

### ğŸ”Œ è¿æ¥é—®é¢˜

**Q: å‡ºç° ConnectionResetError æ€ä¹ˆåŠï¼Ÿ**
A: è¿™æ˜¯ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥ç¨³å®šæ€§
2. å°è¯•ä½¿ç”¨ä»£ç†
3. ç­‰å¾…ç½‘ç»œæ¢å¤åé‡è¯•

**Q: ä¸Šä¼ /ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ**
A: å°è¯•ï¼š

1. è°ƒæ•´å¹¶å‘çº¿ç¨‹æ•°
2. ä½¿ç”¨Aria2ä¸‹è½½å¼•æ“
3. æ£€æŸ¥ç½‘ç»œå¸¦å®½

### ğŸ“ æ–‡ä»¶é—®é¢˜

**Q: æŸäº›æ–‡ä»¶æ— æ³•ä¸Šä¼ ï¼Ÿ**
A: Notionæœ‰æ–‡ä»¶ç±»å‹é™åˆ¶ï¼Œä¸æ”¯æŒçš„æ–‡ä»¶ä¼šè‡ªåŠ¨ä¼ªè£…ä¸º `.txt` æ ¼å¼ä¸Šä¼ ï¼Œä¸‹è½½æ—¶ä¼šè‡ªåŠ¨æ¢å¤ã€‚

**Q: ä¸Šä¼ çš„æ–‡ä»¶åä¸å¯¹ï¼Ÿ**
A: ç¨‹åºä¼šè‡ªåŠ¨å¤„ç†æ–‡ä»¶åï¼Œç‰¹æ®Šå­—ç¬¦ä¼šè¢«å¤„ç†ï¼Œè¿‡é•¿çš„æ–‡ä»¶åä¼šè¢«æˆªæ–­ã€‚

### âš™ï¸ é…ç½®é—®é¢˜

**Q: å¦‚ä½•è·å– Notion Tokenï¼Ÿ**
A: è®¿é—® https://developers.notion.com åˆ›å»ºé›†æˆï¼Œå¤åˆ¶ Tokenï¼Œå¹¶åœ¨é¡µé¢ä¸­åˆ†äº«ç»™é›†æˆã€‚

**Q: Aria2 æ— æ³•å¯åŠ¨ï¼Ÿ**
A: ç¡®ä¿ aria2c.exe åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œæˆ–è€…ç³»ç»Ÿå·²å®‰è£… aria2ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

é¦–å…ˆå£°æ˜,åˆ¶ä½œå›¢é˜Ÿæ˜¯åˆä¸­ç”Ÿ,è¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡é¡¹ç›®å®è·µ

å…¶ä¸­ä½¿ç”¨äº†AIç”ŸæˆæŠ€æœ¯

å¦‚æœä½ å‘ç°äº†é—®é¢˜å¯ä»¥æissues,ä½†æˆ‘ä»¬å¤§æ¦‚ç‡æ²¡æœ‰æ—¶é—´å¤„ç†

---

## âš ï¸ å…è´£å£°æ˜ (Disclaimer)

**é‡è¦æé†’ï¼šè¯·åœ¨ä½¿ç”¨æœ¬é¡¹ç›®å‰ä»”ç»†é˜…è¯»ä»¥ä¸‹å£°æ˜**

æœ¬é¡¹ç›®ç”±åˆä¸­ç”Ÿå¼€å‘è€…åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­åˆ¶ä½œï¼Œä»…ä½œä¸ºæŠ€æœ¯å­¦ä¹ å’Œç ”ç©¶ç”¨é€”ã€‚é¡¹ç›®ä½¿ç”¨äº†AIè¾…åŠ©ç”ŸæˆæŠ€æœ¯ï¼Œä»£ç è´¨é‡å’Œç¨³å®šæ€§å¯èƒ½å­˜åœ¨ä¸ç¡®å®šæ€§ã€‚

### ğŸ” ä½¿ç”¨é£é™©
- **æ•°æ®å®‰å…¨**: ä¸Šä¼ åˆ°Notionçš„æ–‡ä»¶å¯èƒ½ä¼šå—åˆ°NotionæœåŠ¡æ¡æ¬¾çš„é™åˆ¶
- **æœåŠ¡å¯ç”¨æ€§**: Notionå¯èƒ½ä¼šæ›´æ”¹APIï¼Œå¯¼è‡´åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨
- **æ³•å¾‹åˆè§„**: è¯·ç¡®ä¿æ‚¨çš„ä½¿ç”¨è¡Œä¸ºç¬¦åˆå½“åœ°æ³•å¾‹æ³•è§„
- **æŠ€æœ¯é£é™©**: å¤§æ–‡ä»¶ä¼ è¾“å¯èƒ½å› ç½‘ç»œé—®é¢˜å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æŸå

### ğŸš« è´£ä»»é™åˆ¶
1. **å¼€å‘è€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»**: å¯¹äºä½¿ç”¨æœ¬é¡¹ç›®é€ æˆçš„æ•°æ®ä¸¢å¤±ã€éšç§æ³„éœ²ã€æœåŠ¡ä¸­æ–­ç­‰ä»»ä½•åæœï¼Œå¼€å‘è€…ä¸æ‰¿æ‹…ä»»ä½•æ³•å¾‹è´£ä»»
2. **ä½¿ç”¨é£é™©è‡ªè´Ÿ**: ç”¨æˆ·åº”è‡ªè¡Œè¯„ä¼°ä½¿ç”¨é£é™©ï¼Œå¼€å‘è€…ä¸å¯¹ä½¿ç”¨åæœæ‰¿æ‹…è´£ä»»
3. **æŠ€æœ¯æ”¯æŒé™åˆ¶**: æœ¬é¡¹ç›®ä¸ºå­¦ä¹ é¡¹ç›®ï¼Œå¼€å‘è€…å¯èƒ½æ— æ³•æä¾›åŠæ—¶çš„æŠ€æœ¯æ”¯æŒæˆ–æ›´æ–°
4. **åŠŸèƒ½ä¸ä¿è¯**: é¡¹ç›®åŠŸèƒ½å¯èƒ½å­˜åœ¨bugæˆ–ä¸å®Œæ•´çš„æƒ…å†µï¼Œå¼€å‘è€…ä¸æä¾›ä»»ä½•è´¨é‡ä¿è¯

### ğŸ’¡ ä½¿ç”¨å»ºè®®
- **å¤‡ä»½é‡è¦æ•°æ®**: åœ¨ä¸Šä¼ é‡è¦æ–‡ä»¶å‰ï¼Œè¯·åŠ¡å¿…å¤‡ä»½
- **å°è§„æ¨¡æµ‹è¯•**: å»ºè®®å…ˆåœ¨å°æ–‡ä»¶ä¸Šæµ‹è¯•åŠŸèƒ½
- **éµå®ˆæœåŠ¡æ¡æ¬¾**: è¯·éµå®ˆNotionå’Œå…¶ä»–ç›¸å…³æœåŠ¡çš„æ¡æ¬¾
- **è‡ªè¡Œæ‰¿æ‹…é£é™©**: ä»»ä½•ä½¿ç”¨è¡Œä¸ºäº§ç”Ÿçš„åæœç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…

**é€šè¿‡ä½¿ç”¨æœ¬é¡¹ç›®ï¼Œæ‚¨å³è¡¨ç¤ºåŒæ„ä»¥ä¸Šå…è´£æ¡æ¬¾ã€‚å¦‚ä¸åŒæ„ï¼Œè¯·å‹¿ä½¿ç”¨æœ¬é¡¹ç›®ã€‚**

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [GNU General Public License v3.0](LICENSE) å¼€æºè®¸å¯è¯ã€‚

**ç‰ˆæƒæ‰€æœ‰ (C) 2025-2026 Ruibin_Ningh & Zyx_2012**

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.

**è”ç³»æ–¹å¼**: ruibinningh@outlook.com

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·å¯¹é¡¹ç›®çš„æ”¯æŒï¼

ç‰¹åˆ«æ„Ÿè°¢ï¼š
- [Notion](https://notion.so) æä¾›çš„ä¼˜ç§€API
- [Aria2](https://aria2.github.io/) æä¾›çš„ä¸‹è½½å¼•æ“
- å¼€æºç¤¾åŒºæä¾›çš„ä¼˜ç§€Pythonåº“

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=RuibinNingh/Notion-Files-Management&type=date&legend=top-left)](https://www.star-history.com/#RuibinNingh/Notion-Files-Management&type=date&legend=top-left)
>>>>>>> dd9e024ca52a7abc178aae543491e25f7b46820e
